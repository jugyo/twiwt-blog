{% macro entry_form(url, button_label, entry=None) -%}
    <div id="entry-form">
      <form action="{{ url }}" method=post>
        <p><input type=text name=title size=60 value="{{ entry.title | d('') }}" tabindex=1 /></p>
        <div class="help">
          <a href="#" id="show-help" title="Help">Markdown Cheat Sheet</a>
        </div>
        <p><textarea name=body rows=30 cols=100 tabindex=2>{{ entry.body | d('') }}</textarea></p>
        <div class="submit-button"><input type=submit value={{ button_label }} tabindex=3></div>
      </form>
    </div>

    {% include 'form_help.html' %}

    <script type="text/javascript">
      $('#show-help').click(function () {
        $('#form-help').show();
      });
      $('#close-help').click(function () {
        $('#form-help').hide();
      });
      $('#form-help').draggable({ cancel: 'pre' });
    </script>
{%- endmacro %}

{% macro entry_list(entries) -%}
    <ul id="entries">
      {% for e in entries %}
        <li>
          <h3><a href="{{ url_for('entry', hashcode=e.hashcode) }}">{{ e.title | d(e.hashcode, e.title == '') }}</a></h3>
          <div class="entry-body">
            {{ e.formated_body() | safe}}
          </div>
        </li>
      {% endfor %}
    </ul>
{%- endmacro %}

{% macro user_link(user) -%}
    <a href="{{ url_for('user', username=user.name) }}">{{ user.name }}</a>
{%- endmacro %}

{% macro user_image_link(user, size='n') -%}
    <a href="{{ url_for('user', username=user.name) }}">
      <img src="http://img.tweetimag.es/i/{{ user.name }}_{{ size }}" alt="{{ user.screen_name }}" class="user-image" />
    </a>
{%- endmacro %}
